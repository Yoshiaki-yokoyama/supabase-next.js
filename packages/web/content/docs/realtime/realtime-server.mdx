export const metadata = {
  title: 'Realtime Server',
  description: 'Guide for using the realtime server.'
}


## Database preparation

We have tried to keep the requirements to use this as simple as possible. However there are still *some* things that you need to enable on your Postgres database (namely, replication).

**1. Enable replication**

Make sure your database has replication turned on:

```bash
SHOW wal_level; # This should be "logical"
SHOW max_replication_slots; # You need at least one free slot for Supabase
```

**2. Listen to all table changes**

Create a publication for Supabase to listen to on all of your tables.

```bash
CREATE PUBLICATION supabase_realtime FOR ALL TABLES;
```

**3. (Optional) Receive old data**

If you want to receive the data the previous data (i.e. what the fields were *before* updates), then you need to set each table to have a full replica identity:

```bash
ALTER TABLE YOUR_TABLE_NAME replica identity full; # Change YOUR_TABLE_NAME
```


## Running the server

The easiest way to use this is to set up a docker compose:

```yml
# docker-compose.yml
version: '3'
services:
  realtime:
    image: supabase/realtime
    ports:
      - "4000:4000"
    environment:
    - POSTGRES_USER=postgres
    - POSTGRES_PASSWORD=postgres
    - POSTGRES_DB=postgres
    - POSTGRES_HOST=localhost
    - POSTGRES_PORT=5432
```

Once you are set up you can run `docker-compose up`

## Next steps

Now that your server is running you can connect to it via one of the client libraries